<o-form service="customers" entity="customer" keys="CUSTOMERID" header-actions="R;I;U;D" show-header-navigation="no">
  <o-text-input attr="CUSTOMERID" sql-type="INTEGER" enabled="no"></o-text-input>
  <o-row>
    <o-column>
      <o-image id="CUSTOMER_PHOTO" attr="PHOTO" empty-image="assets/images/no-image.png" sql-type="OTHER"></o-image>
    </o-column>
    <mat-tab-group fxFlex>
      <mat-tab label="{{ 'CUSTOMER_PERSONAL_INFORMATION' | oTranslate }}">
        <o-column fxFlex layout-padding>
          <o-row>
            <o-text-input class="input-padding" attr="NAME" fxFlex="40" required="yes"></o-text-input>
            <o-text-input class="input-padding" attr="SURNAME" fxFlex="40" required="yes"></o-text-input>
            <o-date-input attr="STARTDATE" fxFlex="20"></o-date-input>
          </o-row>
          <o-row>
            <o-nif-input attr="ID" class="input-padding" fxFlex="40" required="yes"></o-nif-input>
            <o-integer-input attr="PHONE" class="input-padding" step="5" grouping="no" fxFlex="40"></o-integer-input>
            <o-list-picker attr="CUSTOMERTYPEID" class="input-padding" fxFlex="20" service="customers" 
              entity="customerType" keys="CUSTOMERTYPEID" columns="CUSTOMERTYPEID;DESCRIPTION" 
              visible-columns="DESCRIPTION" value-column="CUSTOMERTYPEID"></o-list-picker>
          </o-row>
          <o-row>
            <o-email-input attr="EMAIL" fxFlex></o-email-input>
          </o-row>
          <o-row>
            <o-text-input attr="ADDRESS" fxFlex></o-text-input>
          </o-row>
          <o-row>
            <o-real-input attr="LONGITUDE" decimal-separator="," max-decimal-digits="10" min-decimal-digits="0" class="input-padding"
              fxFlex="50"></o-real-input>
            <o-real-input attr="LATITUDE" decimal-separator="," max-decimal-digits="10" min-decimal-digits="0" fxFlex="50"></o-real-input>
          </o-row>
          <o-row>
            <o-textarea-input attr="COMMENTS" fxFlex></o-textarea-input>
          </o-row>
        </o-column>
      </mat-tab>
      <mat-tab label="{{ 'ACCOUNTS' | oTranslate }}">
          <o-table fxFlex attr="accountsTable" service="customers" entity="vCustomerAccount" keys="ACCOUNTID" insert-button="no"
             refresh-button="no" detail-mode="none" delete-button="no" query-rows="20" parent-keys="CUSTOMERID"
             columns="CUSTOMERID;ACCOUNTID;ENTITYID;OFFICEID;CDID;ANID;STARTDATE;ENDDATE;INTERESRATE;ACCOUNTTYP" 
             visible-columns="ACCOUNTNUMBER;STARTDATE;ENDDATE;INTERESRATE;INTERESRATE_MONTHLY;ACCOUNTTYP"  >
          <o-table-column attr="STARTDATE" title="STARTDATE" type="date" format="LL"></o-table-column>
          <o-table-column attr="ENDDATE" title="ENDDATE" type="date" format="LL"></o-table-column>
          <o-table-column attr="INTERESRATE" title="INTERESRATE" type="percentage" width="150px" decimal-separator=","></o-table-column>
          <o-table-column attr="ACCOUNTNUMBER" title="ACCOUNTNUMBER" class="o-table-column-centered">
          <app-account-number-render></app-account-number-render>
          </o-table-column>
          <o-table-column-calculated attr="INTERESRATE_MONTHLY" title="INTERESRATE_MONTHLY" 
            [operation-function]="intRateMonthly" type="percentage"
            decimal-separator="," class="o-table-column-centered">
          </o-table-column-calculated>
        </o-table>
      </mat-tab>
      <mat-tab label="{{ 'INVOICES' | oTranslate }}">
      <!--  <o-form-layout-manager attr="invoicesTable" title="INVOICES" separator=" " mode="tab" service="invoices" entity="invoices"> -->
        <o-table fxFlex attr="invoicesTable" service="invoices" entity="invoices" keys="INVOICESID" parent-keys="CUSTOMERID" 
        insert-form-route="invoicesnew" controls="true" refresh-button="true" delete-button="true" detail-mode="none"
        show-header-navigation="yes" query-rows="5" columns="INVOICESID;INVOICE_NAME;AMOUNT;INVOICE_FILE;CUSTOMERID" 
        visible-columns="INVOICE_NAME;INVOICE_FILE;AMOUNT" columns-visibility-button="true" edition-mode="click" 
        pagination-controls="yes" pageable="no">
        
          <o-table-column attr="INVOICE_NAME" title="INVOICE'S NAME">
            <o-table-cell-editor-text (editionStarted)="editionStarted($event)" 
            (editionCancelled)="editionCancelled($event)" (editionCommitted)="editionCommitted($event)"></o-table-cell-editor-text>
          </o-table-column>
          <o-table-column attr="INVOICE_FILE" title="INVOICE'S FILE">
            <o-table-cell-editor-text (editionStarted)="editionStarted($event)" 
            (editionCancelled)="editionCancelled($event)" (editionCommitted)="editionCommitted($event)"></o-table-cell-editor-text>
          </o-table-column>
          <o-table-column attr="AMOUNT" title="AMOUNT" editable="yes" type="currency" currency-symbol="â‚¬" sql-type="DOUBLE"
          currency-symbol-position="right">
            <o-table-cell-editor-real (editionStarted)="editionStarted($event)" 
            (editionCancelled)="editionCancelled($event)" (editionCommitted)="editionCommitted($event)"></o-table-cell-editor-real>
          </o-table-column>
          <o-table-context-menu [context-menu]="myContextMenu" insert="yes" edit="yes" view-details="no"></o-table-context-menu>
        </o-table>
      <!-- <o-table-insertable-row columns="INVOICESID;INVOICE_NAME;AMOUNT" required-columns="INVOICE_NAME;AMOUNT"></o-table-insertable-row> 
           
        </o-table>
       </o-form-layout-manager> -->
        <o-context-menu #myContextMenu>
            <o-context-menu-item icon="face" label="Item 1"></o-context-menu-item>
            <o-context-menu-item icon="star_rate" label="Item 2" enabled="no"></o-context-menu-item>
            <o-context-menu-item label="Item 3"></o-context-menu-item>
        </o-context-menu>
        <!-- </o-form-layout-manager> --> 
      </mat-tab>
    </mat-tab-group>
  </o-row>
</o-form>
